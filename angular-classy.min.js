!function(){var n={},t={},o=function(o,a){var r=function(o){if(t[o])for(var s=angular.module(o),e=0;e<s.requires.length;e++){var c=s.requires[e],l=n[c];l&&(i[c]=l,l.name||(l.name=c.replace("classy.","")),a.__classyDefaults||(a.__classyDefaults={}),a.__classyDefaults[l.name]=angular.copy(l.options||{})),r(c)}},i={};return t[o]=!0,r(o),i},a=function(n,t,o){for(var a=t[2].classy.activePlugins,r=t[0].__options||t[0].prototype.__options,i=Object.keys(a),s=0;s<i.length;s++){var e=a[i[s]];e.options=r[e.name]||{},e.classyOptions=r,o&&angular.isFunction(o.before)&&o.before(e);var c;e&&n&&angular.isFunction(e[n])&&(c=e[n].apply(e,t)),o&&angular.isFunction(o.after)&&o.after(e,c)}},r=function(n){var t,o,a,i,s;for(i=0,s=arguments.length;s>i;i++)if(o=arguments[i],o!==n)for(t in o)a=o[t],n[t]&&n[t].constructor&&n[t].constructor===Object?r(n[t],a):n[t]=angular.copy(a);return n},i=angular.module;angular.module=function(t,a,r){var e=i(t,a,r);if(a){"classy.core"===t&&(n[t]={});var c=o(t,e);c["classy.core"]&&(e.classy={plugin:{controller:function(o){n[t]=o}},options:{controller:{}},activePlugins:c,controller:function(n){function t(){s.init(this,arguments,e)}return s.preInit(t,n,e),t},controllers:function(n){for(var t=0;t<n.length;t++)this.controller(n[t]);return e}},e.cC=e.classy.controller,e.cCs=e.classy.controllers)}return e};var s={localInject:["$q"],preInit:function(n,t,o){this.buildConstructor(n,t),this.buildOptions(n,t,o),a("preInitBefore",[n,t,o]),a("preInit",[n,t,o]),a("preInitAfter",[n,t,o])},buildConstructor:function(n,t){for(var o=Object.keys(t),a=0;a<o.length;a++){var r=o[a];t.hasOwnProperty(r)&&(n.prototype[r]=t[r])}},buildOptions:function(n,t,o){for(var a,i,s=r({},o.__classyDefaults,o.classy.options.controller,t.__options),e={},c=Object.keys(s),l=0;l<c.length;l++)i=c[l],a=s[c[l]],angular.isObject(a)||(e[i]=a);if(Object.keys(e).length)for(var u=0;u<c.length;u++)i=c[u],a=s[c[u]],angular.isObject(a)&&angular.extend(a,e);n.prototype.__options=s},init:function(n,t,o){for(var r=0,i={},s=0;s<n.constructor.__classDepNames.length;s++){var e=n.constructor.__classDepNames[s];i[e]=t[r],r++}a(null,[n,i,o],{before:function(n){if(angular.isArray(n.localInject))for(var o=0;o<n.localInject.length;o++){var a=n.localInject[o];n[a]=t[r],r++}}}),a("initBefore",[n,i,o]);var c=[];a("init",[n,i,o],{after:function(n,t){t&&t.then&&c.push(t)}});var l=function(){angular.isFunction(n.init)&&n.init(),a("initAfter",[n,i,o]),this.postInit(n,i,o)},u=angular.bind(this,l);c.length?t[r].all(c).then(u):u()},postInit:function(n,t,o){a("postInitBefore",[n,t,o]),a("postInit",[n,t,o]),a("postInitAfter",[n,t,o])}};angular.module("classy.core",[]),angular.module("classy.bindData",["classy.core"]).classy.plugin.controller({localInject:["$parse"],options:{enabled:!0,addToScope:!0,addToClass:!0,privatePrefix:"_",keyName:"data"},hasPrivatePrefix:function(n){var t=this.options.privatePrefix;return t?n.slice(0,t.length)===t:!1},init:function(n,t){var o=n.constructor.prototype[this.options.keyName];if(this.options.enabled&&o){var a=angular.copy(o);if(angular.isFunction(a))a=a.call(n);else if(angular.isObject(a))for(var r in a){var i=a[r];if(angular.isString(i)){var s=this.$parse(i);a[r]=s(n)}else a[r]=i}for(var e in a){var c=a[e];this.options.addToClass&&(n[e]=c),this.options.addToScope&&!this.hasPrivatePrefix(e)&&t.$scope&&(t.$scope[e]=c)}}}}),angular.module("classy.bindDependencies",["classy.core"]).classy.plugin.controller({options:{enabled:!0,scopeShortcut:"$"},preInit:function(n,t,o){var a=t.inject||[];angular.isArray(a)&&this.inject(n,a,o)},inject:function(n,t,o){var a=[];for(var r in o.classy.activePlugins){var i=o.classy.activePlugins[r];angular.isArray(i.localInject)&&(a=a.concat(i.localInject))}a=a.concat(s.localInject),n.__classDepNames=angular.copy(t),n.$inject=t.concat(a)},initBefore:function(n,t){if(this.options.enabled)for(var o=n.constructor.$inject,a=0;a<o.length;++a){var r=o[a];n[r]=t[r],"$scope"===r&&this.options.scopeShortcut&&(n[this.options.scopeShortcut]=n[r])}}}),angular.module("classy.bindMethods",["classy.core"]).classy.plugin.controller({localInject:["$parse"],options:{enabled:!0,addToScope:!0,addToClass:!0,privatePrefix:"_",ignore:["constructor","init"],keyName:"methods"},hasPrivatePrefix:function(n){var t;return t=this.options.privatePrefix,t?n.slice(0,t.length)===t:!1},init:function(n,t){var o=[].indexOf||function(n){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===n)return t;return-1};if(this.options.enabled){var a=n.constructor.prototype[this.options.keyName];for(var r in a){var i,s=a[r];if(!angular.isFunction(s)||o.call(this.options.ignore,r)>=0){if(angular.isString(s)){var e=this.$parse(s);i=function(){return e(n)}}}else i=angular.bind(n,s);angular.isFunction(i)&&(this.options.addToClass&&(n[r]=i),this.options.addToScope&&!this.hasPrivatePrefix(r)&&t.$scope&&(t.$scope[r]=i))}}}}),angular.module("classy.register",["classy.core"]).classy.plugin.controller({options:{enabled:!0,key:"name"},preInit:function(n,t,o){this.options.enabled&&angular.isString(t[this.options.key])&&o.controller(t[this.options.key],n)}}),angular.module("classy.watch",["classy.core"]).classy.plugin.controller({localInject:["$parse"],options:{enabled:!0,bindWatchToClass:!1,_watchKeywords:{normal:[],objectEquality:["{object}","{deep}"],collection:["{collection}","{shallow}"]}},isActive:function(n,t){if(this.options.enabled&&angular.isObject(n.watch)){if(!t.$scope)throw new Error("You need to inject `$scope` to use the watch object");return!0}},watchFns:{normal:function(n,t,o,a){return a.$scope.$watch(t,angular.bind(n,o))},objectEquality:function(n,t,o,a){return a.$scope.$watch(t,angular.bind(n,o),!0)},collection:function(n,t,o,a){return a.$scope.$watchCollection(t,angular.bind(n,o))}},convertToFunctionExpression:function(n,t){var o=this.$parse;return function(){return o(n)(t)}},postInit:function(n,t){if(this.isActive(n,t)){var o=this.options._watchKeywords;for(var a in n.watch){var r=n.watch[a];if(angular.isString(r)&&(r=n[r]),angular.isString(a)&&angular.isFunction(r)){var i=!1;for(var s in this.watchFns){var e=this.watchFns[s];if(i)break;for(var c=o[s],l=0;l<c.length;l++){var u=c[l];if(-1!==a.indexOf(u)){var p=a.replace(u,""),f=this.options.bindWatchToClass?this.convertToFunctionExpression(p,n):p;e(n,f,r,t),i=!0;break}}}if(!i){var f=this.options.bindWatchToClass?this.convertToFunctionExpression(a,n):a;this.watchFns.normal(n,f,r,t)}}}}}}),angular.module("classy",["classy.bindData","classy.bindDependencies","classy.bindMethods","classy.core","classy.register","classy.watch"])}();
//# sourceMappingURL=angular-classy.min.js.map
